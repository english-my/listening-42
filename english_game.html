<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‹±èªä¸¦ã³æ›¿ãˆ10å•ã‚¯ã‚¤ã‚º</title>
  <style>
body {
  font-family: sans-serif;
  padding: 20px;
  max-width: 100%;
  box-sizing: border-box;
}

.word-bank, .sentence-box {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
  justify-content: center;
}

.word {
  border: 1px solid #aaa;
  padding: 8px 12px;
  background: #e0f7fa;
  cursor: move;
  border-radius: 5px;
  font-size: 16px;
  white-space: nowrap;
}

.slot {
  border: 2px dashed #ccc;
  min-width: 60px;
  min-height: 30px;
  padding: 10px;
  text-align: center;
  background: #fff;
  border-radius: 5px;
  box-sizing: border-box;
  word-break: break-word;
  flex-shrink: 0;
}

button {
  font-size: 16px;
  padding: 8px 16px;
  margin: 5px;
}

    .correct {
  background-color: #c8e6c9; /* è–„ã„ç·‘ */
}
.incorrect {
  background-color: #ffcdd2; /* è–„ã„èµ¤ */
}
  </style>
</head>
<body>

<h2 id="questionTitle">ğŸ§© è‹±æ–‡ä¸¦ã³æ›¿ãˆã‚¯ã‚¤ã‚ºï¼ˆ1å•ç›®ï¼‰</h2>

<div class="sentence-box" id="sentenceBox"></div>
<div class="word-bank" id="wordBank"></div>

<button onclick="playAudio()">â–¶ éŸ³å£°ã‚’å†ç”Ÿã™ã‚‹</button>
<button onclick="nextQuestion()" style="display: none;" id="nextBtn">â¡ æ¬¡ã®å•é¡Œã¸</button>
<button onclick="skipQuestion()" id="skipBtn">â­ SKIP</button>

<p id="correctAnswer" style="font-weight: bold; color: green; margin-top: 10px;"></p>

<audio id="voicePlayer">
  <source id="audioSource" src="" type="audio/mpeg">
</audio>

<script>
const sentences = [
  "I joined the meeting late because I lost track of time.",
  "Can you hear me? I think my microphone isnâ€™t working.",
  "I saw your presentation, and it was very clear. Good job!",
  "I forgot to share my screen during the meeting. Let me try again.",
  "We discussed the project details and set new deadlines.",
  "I missed what you said. Could you repeat it, please?",
  "I turned off my video because my internet connection is slow.",
  "Letâ€™s review the meeting minutes before we end the call.",
  "I couldnâ€™t join the meeting because I had technical issues.",
  "She gave us helpful feedback during the online meeting."
];


  let current = 0;

  function loadQuestion(index) {
    document.getElementById("sentenceBox").innerHTML = "";
    document.getElementById("wordBank").innerHTML = "";
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("questionTitle").innerText = `ğŸ§© è‹±æ–‡ä¸¦ã³æ›¿ãˆã‚¯ã‚¤ã‚ºï¼ˆ${index + 1}å•ç›®ï¼‰`;

    const sentence = sentences[index];
    const words = sentence.split(" ");
    const shuffled = [...words].sort(() => Math.random() - 0.5);

    // ã‚¹ãƒ­ãƒƒãƒˆã‚’è¡¨ç¤º
    for (let i = 0; i < words.length; i++) {
      const slot = document.createElement("div");
      slot.className = "slot";
      slot.ondrop = drop;
      slot.ondragover = allowDrop;
      slot.dataset.expected = words[i];
      slot.onclick = () => checkCompletion();
      document.getElementById("sentenceBox").appendChild(slot);
    }

    // å˜èªã‚’è¿½åŠ 
    for (let i = 0; i < shuffled.length; i++) {
      const word = document.createElement("div");
      word.className = "word";
      word.draggable = true;
      word.id = `word${index}_${i}`;
      word.innerText = shuffled[i];
      word.ondragstart = drag;
      document.getElementById("wordBank").appendChild(word);
    }

// éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆ
const audio = document.getElementById("audioSource");
audio.src = `42-${index + 1}.mp3`;
document.getElementById("voicePlayer").load();

  }

  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    const wordId = ev.dataTransfer.getData("text");
    const word = document.getElementById(wordId);
    if (!ev.target.hasChildNodes()) {
      ev.target.appendChild(word);
      checkCompletion();
    }
  }

 function checkCompletion() {
  const slots = document.querySelectorAll(".slot");
  let correct = true;

  slots.forEach((slot, i) => {
    const word = slot.firstChild;
    if (!word) {
      slot.classList.remove("correct", "incorrect");
      correct = false;
    } else if (word.innerText === slot.dataset.expected) {
      slot.classList.add("correct");
      slot.classList.remove("incorrect");
    } else {
      slot.classList.add("incorrect");
      slot.classList.remove("correct");
      correct = false;
    }
  });

  if (correct) {
    document.getElementById("nextBtn").style.display = "inline-block";
  } else {
    document.getElementById("nextBtn").style.display = "none";
  }
}

  function playAudio() {
    const audio = document.getElementById("voicePlayer");
    audio.play();
  }

  function nextQuestion() {
    current++;
    if (current < sentences.length) {
      loadQuestion(current);
    } else {
      document.body.innerHTML = "<h2>ğŸ‰ å…¨éƒ¨çµ‚ã‚ã‚Šã¾ã—ãŸï¼ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼</h2>";
    }
  }
  
 function skipQuestion() {
  // æ­£è§£æ–‡ã‚’å–å¾—
  const correct = sentences[current];

  // æ­£è§£ã‚’ç”»é¢ã«è¡¨ç¤º
  const answerDisplay = document.getElementById("correctAnswer");
  answerDisplay.textContent = "âœ” æ­£è§£: " + correct;

  // 3ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸è‡ªå‹•ã§é€²ã‚€
  setTimeout(() => {
    current++;
    if (current < sentences.length) {
      answerDisplay.textContent = ""; // è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
      loadQuestion(current);
    } else {
      document.body.innerHTML = "<h2>ğŸ‰ å…¨éƒ¨çµ‚ã‚ã‚Šã¾ã—ãŸï¼ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼</h2>";
    }
  }, 3000);
}

  // æœ€åˆã®å•é¡Œã‚’èª­ã¿è¾¼ã¿
  loadQuestion(current);
</script>

</body>
</html>
